#类加载过程
- - - 
## 加载

+ 通过一个类的全限定名(com.example.Test)来获取定义此类的二进制字节流。
+ 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。
+ 在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口。（类都是Class的对象）

- - -

## 连接

> 验证(使用-Xverrify:none关闭验证)
> > 文件格式验证(符合Class文件规范)
> > > + 是否以魔数0xCAFEBABE开头。
> > > + 主、次版本号是否在当前虚拟机的处理范围内。
> > > + 常量池的常量是否有不被支持的常量类型(检查常量tag标志)。
> > > + .... 

> > 元数据验证(符合Java语言规范)
> > > + 这个类是否有父类(除了Object类以外)
> > > + 这个类是否继承了不允许被继承的类(被final修饰的类)
> > > + 如果这个类不是抽象类，是否实现了其父类或接口中所有抽象方法
> > > + 类中的字段、方法是否与父类产生矛盾(如覆盖了父类final字段，出现不合规则的方法重载)

> > 字节码验证
> > > 确保程序语义合法，符合逻辑，保证被校验的类的方法在运行时不会做出危害虚拟机安全的事件。

> > 符号引用验证(确保解析动作正常执行)
> > > + 符号引用通过字符串描述的全限定名是否能找到对应类。
> > > + 在指定类中是否存在符合方法的字段描述符以及简单名称所描述的方法和字段。
> > > + 符号引用中的类、字段、方法的访问性是否可被当前类访问。


> 准备
> > 为类变量分配内存并设置类变量的初始值。而不包括实例变量，实例变量会在对象实例化时随着对象一块分配在Java堆中。

> > public static int value=12;(此时赋值value=0)

> > public final (static) int value = 12;(此时value=12)

> 解析
> > 把符号引用转换成直接引用(指针、相对偏移量、句柄)
- - -
## 初始化
+ 为变量赋最终值。
+ JVM初始化步骤

	 1、假如这个类还没有被加载和连接，则程序先加载并连接该类
	
	 2、假如该类的直接父类还没有被初始化，则先初始化其直接父类
	
	 3、假如类中有初始化语句，则系统依次执行这些初始化语句

+ 类初始化时机：只有当对类的主动使用的时候才会导致类的初始化，类的主动使用包括以下六种：

	– 创建类的实例，也就是new的方式
	
	– 访问某个类或接口的静态变量，或者对该静态变量赋值
	
	– 调用类的静态方法
	
	– 反射（如Class.forName(“com.example.Test”)）
	
	– 初始化某个类的子类，则其父类也会被初始化
	
	– Java虚拟机启动时被标明为启动类的类（Java Test），直接使用java.exe命令来运行某个主类